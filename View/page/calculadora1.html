<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cálculo de Prima de Seguro</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        label {
            font-weight: bold;
            margin-top: 10px;
            display: block;
        }
        .input-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .input-group label {
            margin-bottom: 5px;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
        }
        .checkbox-group img {
            width: 20px;
            height: 20px;
            margin-left: 10px;
        }
        input[type="range"] {
            width: 100%;
            margin-top: 5px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #e2f0d9;
            border: 1px solid #4CAF50;
            border-radius: 4px;
            display: none;
        }
        .error {
            color: red;
            font-weight: bold;
        }

        /* Media Query para pantallas más grandes (más de 500px) */
        @media (min-width: 500px) {
            .input-group {
                grid-template-columns: 1fr 1fr;
            }

            .input-group input, .input-group select {
                width: 100%;
            }

            .checkbox-group {
                justify-content: space-between;
            }
        }

        /* Media Query para pantallas más grandes (más de 800px) */
        @media (min-width: 800px) {
            .container {
                max-width: 800px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Cálculo de Prima de Seguro</h1>
    
    <form id="formularioSeguro">
        <!-- Datos del Asegurado -->
        <div class="input-group">
            <div>
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" required>
            </div>
            <div>
                <label for="segundoNombre">Segundo Nombre:</label>
                <input type="text" id="segundoNombre">
            </div>
        </div>

        <div class="input-group">
            <div>
                <label for="apellido">Apellido:</label>
                <input type="text" id="apellido" required>
            </div>
            <div>
                <label for="segundoApellido">Segundo Apellido:</label>
                <input type="text" id="segundoApellido">
            </div>
        </div>

        <div class="input-group">
            <div>
                <label for="fechaNacimiento">Fecha de Nacimiento:</label>
                <input type="date" id="fechaNacimiento" required>
            </div>
            <div>
                <label for="genero">Género:</label>
                <select id="genero" required>
                    <option value="hombre">Hombre</option>
                    <option value="mujer">Mujer</option>
                </select>
            </div>
        </div>

        <div class="input-group">
            <div>
                <label for="celular">Celular:</label>
                <input type="tel" id="celular" pattern="[0-9]{9}" required>
            </div>
            <div>
                <label for="email">Correo Electrónico:</label>
                <input type="email" id="email" required>
            </div>
        </div>

        <div class="input-group">
            <div class="checkbox-group">
                <label for="usaMoto">¿Usa moto frecuentemente?</label>
                <input type="checkbox" id="usaMoto">
                <img src="https://img.icons8.com/ios/452/motorcycle.png" alt="Moto Icon">
            </div>
            <div>
                <label for="incremento">Porcentaje de Incremento:</label>
                <select id="incremento" required>
                    <option value="3">3%</option>
                    <option value="4">4%</option>
                    <option value="5">5%</option>
                    <option value="6">6%</option>
                    <option value="7">7%</option>
                    <option value="8">8%</option>
                </select>
            </div>
        </div>

        <!-- Barra de Progreso para el valor asegurado -->
        <label for="valorAsegurado">Valor Asegurado (en millones):</label>
        <input type="range" id="valorAsegurado" min="50" max="500" step="1" value="50" oninput="actualizarValorAsegurado()">
        <p>Valor Asegurado: <span id="valorAseguradoDisplay">50,000,000</span> millones</p>

        <button type="button" onclick="calcularPrima()">Calcular Prima</button>
    </form>

    <div class="result" id="resultado">
        <h3>Resultado:</h3>
        <p id="primaResultado"></p>
    </div>
    
    <div class="error" id="error"></div>
</div>

<script>
// Definir las primas base, factor que indica un valor constante de pesosPrima/millonAsegurado
const primas = {
  hombre: {
    3: 1039,
    4: 1660.8,
    5: 2282.6,
    6: 2904.4,
    7: 3526.2,
    8: 4148
  },
  mujer: {
    3: 666.0,
    4: 1080,
    5: 1494,
    6: 1908,
    7: 2322,
    8: 2736
  }
};

// Función para calcular la edad a partir de la fecha de nacimiento
function calcularEdad(fechaNacimiento) {
    const hoy = new Date();
    const nacimiento = new Date(fechaNacimiento);
    let edad = hoy.getFullYear() - nacimiento.getFullYear();
    const m = hoy.getMonth() - nacimiento.getMonth();
    if (m < 0 || (m === 0 && hoy.getDate() < nacimiento.getDate())) {
        edad--;
    }
    return edad;
}

// Actualizar el valor asegurado en el display
function actualizarValorAsegurado() {
    const valorAsegurado = document.getElementById("valorAsegurado").value;
    document.getElementById("valorAseguradoDisplay").innerText = valorAsegurado + ',000,000';
}

// Función para calcular la prima final
function calcularPrima() {
    let validacion = false;

    // Ciclo de validación de los campos
    do {
        // Obtener los valores del formulario
        const nombre = document.getElementById("nombre").value;
        const segundoNombre = document.getElementById("segundoNombre").value;
        const apellido = document.getElementById("apellido").value;
        const segundoApellido = document.getElementById("segundoApellido").value;
        const fechaNacimiento = document.getElementById("fechaNacimiento").value;
        const genero = document.getElementById("genero").value;
        const celular = document.getElementById("celular").value;
        const email = document.getElementById("email").value;
        const usaMoto = document.getElementById("usaMoto").checked;
        const incremento = parseInt(document.getElementById("incremento").value);
        const valorAsegurado = parseInt(document.getElementById("valorAsegurado").value);

        // Limpiar el mensaje de error
        document.getElementById("error").innerHTML = "";

        // Validar los datos
        const edad = calcularEdad(fechaNacimiento);

        // Verificación de edad
        if (edad < 18 || edad > 79) {
            document.getElementById("error").innerHTML = "La edad debe estar entre 18 y 79 años.";
            validacion = false;
            break;
        }

        // Verificación de incremento
        if (![3, 4, 5, 6, 7, 8].includes(incremento)) {
            document.getElementById("error").innerHTML = "El incremento debe ser uno de los siguientes: 3, 4, 5, 6, 7, 8.";
            validacion = false;
            break;
        }

        // Verificación de género
        if (genero !== "hombre" && genero !== "mujer") {
            document.getElementById("error").innerHTML = "El género debe ser 'hombre' o 'mujer'.";
            validacion = false;
            break;
        }

        // Si todos los datos son válidos, se realiza el cálculo
        let primaBase = primas[genero][incremento];
        let variacionEdad = 0.0005 * (edad - 40);
        let primaFinal = primaBase * (1 + variacionEdad);

        // Aplicar sobrecosto si usa moto y tiene entre 18 y 35 años
        if (usaMoto && edad >= 18 && edad <= 35) {
            primaFinal *= 1.15; // Incremento del 15%
        }

        // Aplicar sobrecosto si usa moto y tiene entre 36 y 50 años
        if (usaMoto && edad >36 && edad <= 50) {
            primaFinal *= 1.10; // Incremento del 10%
        }

        // Aplicar sobrecosto si usa moto y tiene entre 51 años y +
        if (usaMoto && edad >51 && edad <= 79) {
            primaFinal *= 1.05; // Incremento del 5%
        }

        // Ajustar la prima en relación al valor asegurado
        primaFinal = primaFinal * valorAsegurado;

        // Mostrar el resultado
        document.getElementById("resultado").style.display = "block";
        document.getElementById("primaResultado").innerText = `La prima para ${nombre} ${segundoNombre} ${apellido} ${segundoApellido} de ${edad} años de edad, considerando un incremento del ${incremento}% y valor asegurado de ${valorAsegurado} millones es: $${primaFinal.toFixed(2)}`;

        validacion = true;  // Si todo es correcto, salir del ciclo
    } while (!validacion);  // Continuar hasta que todos los datos sean válidos
}
</script>

</body>
</html>
